<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>azDataTable</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <style>
        html {
            font-family: 'Roboto', sans-serif;
            font-size: 13px;
        }
    </style>
    <script src="./index.js"></script>
</head>

<body>
    <div id="table0"></div>
    <script>
        // $.azDebugDiv();
        const data = [
            ['0', 'B0', 'C0', 'D0', 'E0', 'F1', 'G2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['1', 'B1', 'C1', 'D1', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['2', 'B2', 'C2', 'D2', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['3', 'B3', 'C3', 'D3', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2',
                'const $td = $this.find(`tbody td:nth-of-type(${index+1})`);'
            ],
            ['4', 'B4', 'C4', 'D4', 'E0', 'F1', 'G2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['5', 'const $td = $this.find(`tbody td:nth-of-type(${index+1})`);',
                'C5', 'D5', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'
            ],
            ['6', 'B6', 'C6', 'D6', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['7', 'B7', 'C7', 'D7', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['8', 'B8', 'C8', 'D8', 'E0', 'F1', 'G2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['9', 'B9', 'C9', 'D9', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['10', 'B10', 'C10', 'D10', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['11', 'B11', 'C11', 'D11', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['12', 'B12', 'C12', 'D12', 'E0', 'F1', 'G2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['13', 'B13', 'C13', 'D13', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['14', 'B14', 'C14', 'D14', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['15', 'B15', 'C15', 'D15', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['16', 'B16', 'C16', 'D16', 'E0', 'F1', 'G2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['17', 'B17', 'C17', 'D17', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['18', 'B18', 'C18', 'D18', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['19', 'B19', 'C19', 'D19', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['20', 'B20', 'C20', 'D20', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
            ['21', 'B21', 'C21', 'D21', 'A0', 'A1', 'A2', 'A3', 'A0', 'A1', 'A2', 'A3'],
        ];

        const elem = document.querySelector('#table0');
        azui.DataTable(elem, {
            columns: [function () {
                return {
                    text: '#',
                    type: 'number'
                }
            }, {
                dataIndex: 2,
                text: 'B',
                type: 'select',
                options: [{
                        key: '0',
                        title: 'Close'
                    },
                    'Close Others',
                    // null,
                    'Close All',
                ],
            }, {
                dataIndex: 1,
                text: 'C',
                width: 250,
            }, 'D', 'E', 'F', 'G', 'H', 'I', 'J', {
                text: 'K',
                hidden: true,
            }, 'L', ],
            loadData: function (pageNumber, pageSize, sortColumnKey, sortDirection, refresh) {
                if (sortDirection) {
                    const column = this.columns.find(function (col) {
                        return col.key === sortColumnKey;
                    });
                    data.sort(function (a, b) {
                        // minifier bug causing compile error when using let.
                        var av = a[column.dataIndex];
                        var bv = b[column.dataIndex];
                        if (column.type === 'number') {
                            av *= 1;
                            bv *= 1;
                        }
                        const r = sortDirection === 'asc' ? av > bv : av < bv;
                        return r ? 1 : -1;
                    });
                }

                const _pageNumber = Math.max(1, Math.min(Math.ceil(data.length / pageSize),
                    pageNumber));

                const pageData = data.slice((_pageNumber - 1) * pageSize, _pageNumber *
                    pageSize);
                const totalSize = data.length;
                refresh(pageData, totalSize);
            },
            pageSize: 15,
            editor: 'cell',
        });
    </script>
</body>

</html>